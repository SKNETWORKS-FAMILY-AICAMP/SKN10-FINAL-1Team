<div class="p-8">
    <div class="mx-auto max-w-4xl">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        [x-cloak] { display: none !important; }
    </style>    
    <section class="rounded-lg bg-white p-6 shadow-md border border-gray-200">
    <div class="flex items-center justify-between mb-6">
        <h3 class="text-[var(--text-primary)] text-2xl font-semibold leading-tight tracking-[-0.015em]">ì‚¬ìš©ì ëª©ë¡</h3>
        <div class="flex items-center gap-4 ml-auto">
        
        <!-- Alpine ì»´í¬ë„ŒíŠ¸ ì‹œì‘ -->
        <div x-data="{ open: false }" class="relative">
        <!-- 1) ê³„ì • ì‚­ì œ ë²„íŠ¼ -->

        <button
            @click="open = true"
            class="flex items-center gap-3 rounded-full px-6 py-1.5 bg-orange-400 hover:bg-orange-600 text-black"
        ><span class="material-icons-outlined font-bold">ê³„ì • ì‚­ì œ</span></button>

        <!-- 2) ë°±ê·¸ë¼ìš´ë“œ ì˜¤ë²„ë ˆì´ -->
        <div
            x-show="open"
            x-cloak
            class="fixed inset-0 bg-black bg-opacity-50 z-40"
            @click="open = false"
        ></div>

        <!-- 3) ëª¨ë‹¬ ë°•ìŠ¤ -->
        <div
            x-show="open"
            class="fixed inset-0 flex items-center justify-center z-50 p-4"
            x-cloak
        >
            <div class="bg-white rounded-lg shadow-lg w-full max-w-md">
            <div class="flex justify-between items-center px-6 py-4 border-b">
                <h2 class="text-lg font-semibold">ê³„ì • ì‚­ì œ</h2>
                <button @click="open = false" class="text-xl leading-none">&times;</button>
            </div>

            <form
                action="{% url 'knowledge:delete_user' %}"
                method="post"
                class="px-6 py-4 space-y-4"
                @submit.prevent=" 
                    if (confirm('âš ï¸ ì •ë§ í•´ë‹¹ ê³„ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        $event.target.submit()
                    }">
                {% csrf_token %}

                <div>
                <label class="block text-sm font-medium">ğŸ†”<span class="text-red-500"> ì‚­ì œí•  ì´ë©”ì¼</span>ì„ ì…ë ¥í•˜ì„¸ìš”! </label>
                <input type="email" name="email" class="mt-1 w-full border rounded px-3 py-2" />
                </div>
    

                <div class="text-right space-x-2">
                <button
                    type="button"
                    @click="open = false"
                    class="px-4 py-2 rounded border hover:bg-gray-100"
                >ì·¨ì†Œ</button>

                <button
                    type="submit"
                    class="px-4 py-2 rounded bg-red-500 hover:bg-red-700 text-white"
                >ì‚­ì œ</button>
                </div>
                
            </form>
            </div>
        </div>
        </div>
        <!-- Alpine ì»´í¬ë„ŒíŠ¸ ë -->

        
        <!-- Alpine ì»´í¬ë„ŒíŠ¸ ì‹œì‘ -->
        <div x-data="{ open: false }" class="relative">
        <!-- 1) ê³„ì • ì¶”ê°€ ë²„íŠ¼ -->

        <button
            @click="open = true"
            class="flex items-center gap-3 rounded-full px-6 py-1.5 bg-orange-400 hover:bg-orange-600 text-black"
        ><span class="material-icons-outlined font-bold">ê³„ì • ì¶”ê°€</span></button>

        <!-- 2) ë°±ê·¸ë¼ìš´ë“œ ì˜¤ë²„ë ˆì´ -->
        <div
            x-show="open"
            x-cloak
            class="fixed inset-0 bg-black bg-opacity-50 z-40"
            @click="open = false"
        ></div>

        <!-- 3) ëª¨ë‹¬ ë°•ìŠ¤ -->
        <div
            x-show="open"
            class="fixed inset-0 flex items-center justify-center z-50 p-4"
            x-cloak
        >
            <div class="bg-white rounded-lg shadow-lg w-full max-w-md">
            <div class="flex justify-between items-center px-6 py-4 border-b">
                <h2 class="text-lg font-semibold">ê³„ì • ì¶”ê°€</h2>
                <button @click="open = false" class="text-xl leading-none">&times;</button>
            </div>

            <form
                action="{% url 'knowledge:create_index' %}"
                method="post"
                class="px-6 py-4 space-y-4">
                {% csrf_token %}

                <div>
                <label class="block text-sm font-medium">ì´ë©”ì¼</label>
                <input type="email" name="email" class="mt-1 w-full border rounded px-3 py-2" />
                </div>

                <div>
                <label class="block text-sm font-medium">ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" name="pw" class="mt-1 w-full border rounded px-3 py-2" />
                </div>

                <div>
                <label class="block text-sm font-medium">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                <input type="password" name="pw_confirm" class="mt-1 w-full border rounded px-3 py-2" />
                </div>

                <div>
                <label class="block text-sm font-medium">ì‚¬ìš©ìëª…</label>
                <input name="username" class="mt-1 w-full border rounded px-3 py-2" />
                </div>

                <div>
                <label class="block text-sm font-medium">ê¶Œí•œ</label>
                <!-- vector typeì´ sparseë¼ë©´ metricì€ dotproduct, dimensionì€ 0ìœ¼ë¡œ ì„ íƒë˜ì–´ ì „ë‹¬-->
                <select id="role" name="role" class="w-full border rounded p-2">
                    <option value="admin">admin</option>
                    <option value="employee">employee</option>
                    <option value="guest">guest</option>
                </select>
                </div>

                <div>
                <label class="block text-sm font-medium">ë¶€ì„œ</label>
                <!-- vector typeì´ sparseë¼ë©´ metricì€ dotproduct, dimensionì€ 0ìœ¼ë¡œ ì„ íƒë˜ì–´ ì „ë‹¬-->
                <select id="department" name="department" class="w-full border rounded p-2">
                    <option value="development">development</option>
                    <option value="business_strategy">business_strategy</option>
                    <option value="customer_management">customer_management</option>
                    <option value="administrator">administrator</option>
                </select>
                </div>




                <div class="text-right space-x-2">
                <button
                    type="button"
                    @click="open = false"
                    class="px-4 py-2 rounded border hover:bg-gray-100"
                >ì·¨ì†Œ</button>

                <button
                    type="submit"
                    class="px-4 py-2 rounded bg-orange-400 hover:bg-orange-600 text-white"
                >ì¶”ê°€</button>
                </div>
                
            </form>
            </div>
        </div>
        </div>
        <!-- Alpine ì»´í¬ë„ŒíŠ¸ ë -->
        
        </div>
    </div>
    
    <div class="@container">
    <div class="overflow-x-auto rounded-lg border border-[var(--border-color)]">
    <table class="min-w-full divide-y divide-[var(--border-color)]">
    <thead class="bg-slate-50">
    <tr>
    <th class="table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-120 px-6 py-4 text-left text-xs font-semibold text-[var(--text-secondary)] uppercase tracking-wider" scope="col">
                            ì‚¬ìš©ìëª…
                            </th>
    <th class="table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-240 px-6 py-4 text-left text-xs font-semibold text-[var(--text-secondary)] uppercase tracking-wider" scope="col">
                            ì´ë©”ì¼
                            </th>
    <th class="table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-480 px-6 py-4 text-left text-xs font-semibold text-[var(--text-secondary)] uppercase tracking-wider" scope="col">
                            ì—­í• 
                            </th>
    <th class="table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-480 px-6 py-4 text-left text-xs font-semibold text-[var(--text-secondary)] uppercase tracking-wider" scope="col">
                            ë¶€ì„œ
                            </th>
    <th class="table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-480 px-6 py-4 text-left text-xs font-semibold text-[var(--text-secondary)] uppercase tracking-wider" scope="col">
                            ìƒì„± ë‚ ì§œ
                            </th>
    </tr>
    </thead>
    <tbody class="divide-y divide-[var(--border-color)] bg-white">
    {% for user in users %}
        <tr>
        <td class="table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-120 whitespace-nowrap px-6 py-4 text-sm font-medium text-[var(--text-primary)]">{{user.name}}</td>
        <td class="table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-360 whitespace-nowrap px-6 py-4 text-sm text-[var(--text-secondary)]">{{user.email}}</td>
        <td class="table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-480 whitespace-nowrap px-6 py-4 text-sm text-[var(--text-secondary)]">{{user.role}}</td>
        <td class="table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-480 whitespace-nowrap px-6 py-4 text-sm text-[var(--text-secondary)]">{{user.org}}</td>
        <td class="table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-480 whitespace-nowrap px-6 py-4 text-sm text-[var(--text-secondary)]">{{user.created_at}}</td>
    </tr>
    {% endfor %}
    </tbody>
    </table>
    </div>
    <!-- í˜ì´ì§•ì²˜ë¦¬ ì‹œì‘ -->
    <nav aria-label="Pagination" class="py-6">
    <ul class="flex items-center justify-center space-x-2">
        <!-- ì´ì „ í˜ì´ì§€ -->
        {% if users.has_previous %}
        <li>
            <a href="?page={{ users.previous_page_number }}"
                class="px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-100">
                ì´ì „
            </a>
        </li>
        {% else %}
        <li>
            <span
                class="px-3 py-1 border border-gray-200 rounded-md text-gray-400 bg-gray-100 cursor-not-allowed">
                ì´ì „
            </span>
        </li>
        {% endif %}

        <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
        {% for page_number in users.paginator.page_range %}
        {% if page_number >= users.number|add:-5 and page_number <= users.number|add:5 %}
        {% if page_number == users.number %}
        <li>
            <span class="px-3 py-1 bg-blue-600 text-white border border-blue-600 rounded-md">
            {{ page_number }}
            </span>
        </li>
        {% else %}
        <li>
            <a href="?page={{ page_number }}"
            class="px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-100">
            {{ page_number }}
            </a>
        </li>
        {% endif %}
        {% endif %}
        {% endfor %}

        <!-- ë‹¤ìŒ í˜ì´ì§€ -->
        {% if users.has_next %}
        <li>
            <a href="?page={{ users.next_page_number }}"
                class="px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-100">
                ë‹¤ìŒ
            </a>
        </li>
        {% else %}
        <li>
            <span
                class="px-3 py-1 border border-gray-200 rounded-md text-gray-400 bg-gray-100 cursor-not-allowed">
                ë‹¤ìŒ
            </span>
        </li>
        {% endif %}
    </ul>
    </nav>
    <!-- í˜ì´ì§•ì²˜ë¦¬ ë -->
    <style>
                        @container(max-width:120px) {
                        .table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-120 {
                            display: none;
                        }
                        }
                        @container(max-width:240px) {
                        .table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-240 {
                            display: none;
                        }
                        }
                        @container(max-width:360px) {
                        .table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-360 {
                            display: none;
                        }
                        }
                        @container(max-width:480px) {
                        .table-1fe95620-04dc-4fb3-af13-df40c44c1ea2-column-480 {
                            display: none;
                        }
                        }
                    </style>
    </div>
    </section>
    <!-- ì„±ê³µ ë©”ì‹œì§€ ì¶œë ¥ ë˜ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥-->
    {% if messages %}
        {% for message in messages %}
            <script>alert("{{ message|escapejs }}");</script>
        {% endfor %}
    {% endif %}
    </div>
    </div>